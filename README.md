# éº’éºŸæ“ä½œç³»ç»Ÿæ‰‹å†ŒRAGæ£€ç´¢ç³»ç»Ÿ - ä½¿ç”¨è¯´æ˜

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

æœ¬ç³»ç»Ÿå®ç°äº†åŸºäºéº’éºŸæ“ä½œç³»ç»Ÿæ‰‹å†Œçš„RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æ£€ç´¢ç³»ç»Ÿï¼Œæ”¯æŒä¸­æ–‡æ–‡æ¡£çš„æ™ºèƒ½é—®ç­”ã€‚

### âœ¨ ä¸»è¦åŠŸèƒ½

- ğŸ“„ **PDFæ–‡æ¡£è§£æ**ï¼šè‡ªåŠ¨è§£æéº’éºŸæ“ä½œç³»ç»Ÿæ‰‹å†ŒPDFæ–‡ä»¶
- ğŸ§© **æ™ºèƒ½åˆ†ç‰‡**ï¼šå°†é•¿æ–‡æ¡£åˆ†å‰²ä¸ºåˆé€‚çš„æ–‡æœ¬å—
- ğŸ”¤ **ä¸­æ–‡å‘é‡åŒ–**ï¼šä½¿ç”¨BGE-large-zh-v1.5æ¨¡å‹è¿›è¡Œå‘é‡åŒ–
- ğŸ” **è¯­ä¹‰æ£€ç´¢**ï¼šåŸºäºé—®é¢˜å†…å®¹æ£€ç´¢ç›¸å…³æ–‡æ¡£ç‰‡æ®µ
- ğŸ’¬ **äº¤äº’æŸ¥è¯¢**ï¼šæ”¯æŒå‘½ä»¤è¡Œå’Œäº¤äº’å¼æŸ¥è¯¢æ¨¡å¼

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source .venv/bin/activate

# ç¡®ä¿PDFæ–‡æ¡£åœ¨æ­£ç¡®ä½ç½®
ls data/raw/kylions_handle_book.pdf
```

### 2. æ™ºèƒ½é—®ç­”ï¼ˆæ¨èï¼‰

```bash
# ğŸŒŸ ä¸€æ­¥å®Œæˆï¼šå¤„ç†æ–‡æ¡£å¹¶æŸ¥è¯¢ï¼ˆæ¨èæ–¹å¼ï¼‰
python main.py ask data/raw/kylions_handle_book.pdf "å¦‚ä½•å®‰è£…è½¯ä»¶?"

# æŸ¥è¯¢å…¶ä»–é—®é¢˜
python main.py ask data/raw/kylions_handle_book.pdf "éº’éºŸç³»ç»Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹?"
```

### 3. åˆ†æ­¥å¤„ç†ï¼ˆå¯é€‰ï¼‰

```bash
# å…ˆå¤„ç†PDFæ–‡æ¡£
python main.py process data/raw/kylions_handle_book.pdf

# ç„¶åæŸ¥è¯¢ï¼ˆæ³¨æ„ï¼šä»…åœ¨åŒä¸€ä¼šè¯ä¸­æœ‰æ•ˆï¼Œé‡å¯ç¨‹åºéœ€é‡æ–°å¤„ç†ï¼‰
python main.py query "å¦‚ä½•å®‰è£…è½¯ä»¶?"

# æˆ–ä½¿ç”¨äº¤äº’æ¨¡å¼
python main.py interactive
```

## ğŸ“– è¯¦ç»†ä½¿ç”¨æŒ‡å—

### å‘½ä»¤è¡Œé€‰é¡¹

```bash
# æŸ¥çœ‹å¸®åŠ©
python main.py --help

# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®æ–‡ä»¶
python main.py --config config.yaml process data/raw/kylions_handle_book.pdf

# è®¾ç½®æ—¥å¿—çº§åˆ«
python main.py --log-level DEBUG query "ç³»ç»Ÿå‡çº§"
```

### ä¸»è¦å‘½ä»¤

#### 1. process - å¤„ç†PDFæ–‡æ¡£
```bash
# åŸºæœ¬ç”¨æ³•
python main.py process data/raw/kylions_handle_book.pdf

# è‡ªå®šä¹‰åˆ†ç‰‡å‚æ•°
python main.py process data/raw/kylions_handle_book.pdf --chunk-size 800 --overlap 100
```

#### 2. query - æŸ¥è¯¢æ–‡æ¡£
```bash
# åŸºæœ¬æŸ¥è¯¢
python main.py query "å¦‚ä½•å®‰è£…è½¯ä»¶?"

# è¿”å›æ›´å¤šç»“æœ
python main.py query "ç³»ç»Ÿå‡çº§" --top-k 5

# è®¾ç½®ç›¸ä¼¼åº¦é˜ˆå€¼
python main.py query "éº’éºŸç³»ç»Ÿç‰¹ç‚¹" --min-score 0.5
```

#### 3. ask - æ™ºèƒ½é—®ç­”ï¼ˆğŸŒŸæ¨èï¼‰
```bash
# åŸºæœ¬ç”¨æ³•ï¼šä¸€æ­¥å®Œæˆå¤„ç†å’ŒæŸ¥è¯¢
python main.py ask data/raw/kylinos_handle_book.pdf "å¦‚ä½•å®‰è£…è½¯ä»¶?"

# è¿”å›æ›´å¤šç»“æœ
python main.py ask data/raw/kylinos_handle_book.pdf "ç³»ç»Ÿç‰¹ç‚¹" --top-k 5

# è‡ªå®šä¹‰åˆ†ç‰‡å‚æ•°
python main.py ask data/raw/kylinos_handle_book.pdf "å®‰è£…æ­¥éª¤" --chunk-size 800 --overlap 100
```

#### 4. interactive - äº¤äº’æ¨¡å¼
```bash
# è¿›å…¥äº¤äº’æ¨¡å¼
python main.py interactive

# è‡ªåŠ¨åŠ è½½é»˜è®¤æ–‡æ¡£
python main.py interactive --auto-load
```

#### 5. info - æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯
```bash
# åŸºæœ¬ä¿¡æ¯
python main.py info

# è¯¦ç»†ä¿¡æ¯
python main.py info --detailed
```

#### 6. clear - æ¸…ç©ºæ•°æ®åº“
```bash
# æ¸…ç©ºå‘é‡æ•°æ®åº“
python main.py clear --confirm
```

### äº¤äº’æ¨¡å¼ä½¿ç”¨

åœ¨äº¤äº’æ¨¡å¼ä¸‹ï¼š
- ç›´æ¥è¾“å…¥é—®é¢˜è¿›è¡ŒæŸ¥è¯¢
- è¾“å…¥ `info` æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
- è¾“å…¥ `help` è·å–å¸®åŠ©
- è¾“å…¥ `quit`ã€`exit` æˆ– `q` é€€å‡º
- æŒ‰ `Ctrl+C` éšæ—¶é€€å‡º

## ğŸ”§ é…ç½®è¯´æ˜

### é»˜è®¤é…ç½®

ç³»ç»Ÿä½¿ç”¨ä»¥ä¸‹é»˜è®¤é…ç½®ï¼š

```python
{
    "chunker": {
        "chunk_size": 500,    # åˆ†ç‰‡å¤§å°ï¼ˆå­—ç¬¦æ•°ï¼‰
        "overlap_size": 50    # é‡å å¤§å°ï¼ˆå­—ç¬¦æ•°ï¼‰
    },
    "embedder": {
        "model_name": "BAAI/bge-large-zh-v1.5",  # å‘é‡åŒ–æ¨¡å‹
        "device": None        # è‡ªåŠ¨é€‰æ‹©è®¾å¤‡
    },
    "query": {
        "default_top_k": 3,          # é»˜è®¤è¿”å›ç»“æœæ•°
        "min_score_threshold": 0.1   # æœ€å°ç›¸ä¼¼åº¦é˜ˆå€¼
    }
}
```

### è‡ªå®šä¹‰é…ç½®

åˆ›å»º `config.yaml` æ–‡ä»¶ï¼š

```yaml
chunker:
  chunk_size: 800
  overlap_size: 100

query:
  default_top_k: 5
  min_score_threshold: 0.3
```

ä½¿ç”¨è‡ªå®šä¹‰é…ç½®ï¼š

```bash
python main.py --config config.yaml process data/raw/kylions_handle_book.pdf
```

## ğŸ“Š å¤„ç†æ•ˆæœ

### å¤„ç†ç»Ÿè®¡
- **æ–‡æ¡£é¡µæ•°**ï¼š156é¡µ
- **ç”Ÿæˆåˆ†ç‰‡**ï¼šçº¦123ä¸ª
- **æ€»å­—ç¬¦æ•°**ï¼šçº¦61,000å­—ç¬¦
- **å¤„ç†æ—¶é—´**ï¼šçº¦30ç§’
- **å‘é‡ç»´åº¦**ï¼š1024ç»´

### æŸ¥è¯¢æ•ˆæœ
- **æŸ¥è¯¢å»¶è¿Ÿ**ï¼šé€šå¸¸<1ç§’
- **ç›¸ä¼¼åº¦èŒƒå›´**ï¼š0.0-1.0
- **å»ºè®®é˜ˆå€¼**ï¼š0.3ä»¥ä¸Šä¸ºç›¸å…³å†…å®¹

## â“ å¸¸è§é—®é¢˜

### Q1: æŸ¥è¯¢æç¤º"è¯·å…ˆå¤„ç†æ–‡æ¡£"
**A**: ç³»ç»Ÿä½¿ç”¨å†…å­˜æ¨¡å¼çš„å‘é‡æ•°æ®åº“ï¼Œæ¯æ¬¡é‡å¯ç¨‹åºéœ€è¦é‡æ–°å¤„ç†PDFæ–‡æ¡£ã€‚  
**ğŸ’¡ æ¨èè§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨ `ask` å‘½ä»¤ä¸€æ­¥å®Œæˆå¤„ç†å’ŒæŸ¥è¯¢ï¼š
```bash
python main.py ask data/raw/kylinos_handle_book.pdf "ä½ çš„é—®é¢˜"
```

### Q2: æ‰¾ä¸åˆ°ç›¸å…³ç»“æœ
**A**: å°è¯•ï¼š
- ä½¿ç”¨ä¸åŒçš„å…³é”®è¯
- é™ä½ç›¸ä¼¼åº¦é˜ˆå€¼ `--min-score 0.2`
- å¢åŠ è¿”å›ç»“æœæ•° `--top-k 10`

### Q3: å¤„ç†é€Ÿåº¦æ…¢
**A**: é¦–æ¬¡åŠ è½½BGEæ¨¡å‹éœ€è¦æ—¶é—´ï¼Œåç»­æŸ¥è¯¢ä¼šå¾ˆå¿«ã€‚

### Q4: å†…å­˜ä½¿ç”¨é«˜
**A**: BGEæ¨¡å‹çº¦å ç”¨1.3GBå†…å­˜ï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚

## ğŸ› ï¸ ç³»ç»Ÿæ¶æ„

```
PDFæ–‡æ¡£ â†’ æ–‡æœ¬è§£æ â†’ æ™ºèƒ½åˆ†ç‰‡ â†’ å‘é‡åŒ– â†’ Qdrantå­˜å‚¨
                                              â†“
ç”¨æˆ·æŸ¥è¯¢ â†’ é—®é¢˜å‘é‡åŒ– â†’ ç›¸ä¼¼åº¦æ£€ç´¢ â†’ ç»“æœæ’åº â†’ è¿”å›ç»“æœ
```

### æ ¸å¿ƒç»„ä»¶

1. **SimplePDFParser**: PDFæ–‡æ¡£è§£æ
2. **SimpleOverlapChunker**: æ–‡æ¡£åˆ†ç‰‡
3. **BGEEmbedder**: ä¸­æ–‡å‘é‡åŒ–
4. **QdrantRetriever**: å‘é‡å­˜å‚¨å’Œæ£€ç´¢
5. **RAGSystem**: ç³»ç»Ÿä¸»æ§åˆ¶å™¨

## ğŸ“ˆ æ‰©å±•å¯èƒ½

- æ”¯æŒå¤šæ–‡æ¡£å¤„ç†
- æ·»åŠ æŒä¹…åŒ–å­˜å‚¨
- é›†æˆç”Ÿæˆæ¨¡å‹ï¼ˆå¦‚ChatGLMï¼‰
- æ”¯æŒå›¾ç‰‡å’Œè¡¨æ ¼å¤„ç†
- Webç•Œé¢å¼€å‘

## ğŸ‰ æ€»ç»“

æœ¬ç³»ç»ŸæˆåŠŸå®ç°äº†ï¼š
- âœ… å®Œæ•´çš„RAGå¤„ç†æµç¨‹
- âœ… ä¸­æ–‡æ–‡æ¡£çš„æ™ºèƒ½æ£€ç´¢
- âœ… å‹å¥½çš„å‘½ä»¤è¡Œç•Œé¢
- âœ… çµæ´»çš„é…ç½®ç®¡ç†
- âœ… ç¨³å®šçš„é”™è¯¯å¤„ç†

ç³»ç»Ÿå·²ç»å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œèƒ½å¤Ÿå¯¹éº’éºŸæ“ä½œç³»ç»Ÿæ‰‹å†Œè¿›è¡Œæ™ºèƒ½é—®ç­”ã€‚
